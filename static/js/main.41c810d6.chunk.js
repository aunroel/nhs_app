(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{109:function(e,t,a){},110:function(e,t,a){},127:function(e,t,a){e.exports=a(256)},137:function(e,t,a){},247:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},256:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a(0),l=a.n(r),o=a(37),c=a.n(o),s=a(32),u=(a(136),a(17)),i=a(26),m=(a(137),a(8));a(83);var d=function(e){var t=e.linkUrl,a=e.buttonText,n="header-button"+(t===e.currentUrl?" header-button-selected":"");return l.a.createElement(u.b,{to:t,className:n},l.a.createElement("div",null,a))},p=function(){var e=Object(i.g)().pathname;Object(i.h)().url;return l.a.createElement("div",{className:"header-container"},l.a.createElement("div",{className:"flex-box-vert-align"},l.a.createElement("div",{className:"flex-box-vert-align overflow-y",style:{flex:4,justifyContent:"space-between"}},l.a.createElement("div",{className:"flex-box-vert-align"},l.a.createElement(d,{linkUrl:"/modellist",buttonText:"Model Viewer",currentUrl:e}),l.a.createElement(d,{linkUrl:"/modelupload",buttonText:"Model Upload",currentUrl:e}),l.a.createElement(d,{linkUrl:"/dataViewer",buttonText:"Data Viewer",currentUrl:e})))))},f=a(113),b=a(7),E=a.n(b),v=a(36),h=a(15),g=a(14),y=a.n(g),O=(a(93),a(114)),j=a(276),w=function(e){var t=e.modelName,a=e.validationLossHistory,n=e.validationLoss,r=e.optimizerName,o=e.learningRate,c=e.activation,s=e.isDeployed,u=e.setDeployed;return l.a.createElement("div",{className:"model-box"},l.a.createElement("div",{className:"model-box-text",style:{paddingRight:"40px"}},l.a.createElement("h3",{style:{margin:0,maxWidth:"15em",overflow:"auto"}},t),l.a.createElement("br",null),l.a.createElement("div",{style:{fontSize:"1.4em"}},"Validation loss:","  ",l.a.createElement("span",{style:{fontWeight:"bold"}},n.toFixed(1))),l.a.createElement("br",null),l.a.createElement("div",null,"Optimizer:","  ",l.a.createElement("span",{style:{fontWeight:"bold"}},r)),l.a.createElement("div",null,"Learning Rate:","  ",l.a.createElement("span",{style:{fontWeight:"bold"}},o.toFixed(5))),l.a.createElement("div",null,"Activation:","  ",l.a.createElement("span",{style:{fontWeight:"bold"}},c)),l.a.createElement("br",null),l.a.createElement("div",null,"Is deplyoed:",l.a.createElement("span",{style:{fontWeight:"bold"}},s+""),l.a.createElement("br",null),s?null:l.a.createElement(j.a,{onClick:function(){return u(t)}},"Deploy"))),l.a.createElement("div",{className:"model-box-text"},l.a.createElement(O.a,{data:{labels:a.map((function(e){return""})),datasets:[{label:"Training Accuracy",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:a}]}})))},S=function(){var e=Object(r.useState)(null),t=Object(m.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(null),c=Object(m.a)(o,2),s=c[0],u=c[1],i=function(){var e=Object(h.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/models/list");case 3:t=e.sent,console.log("resr",t),a=t.data.filter((function(e){return JSON.parse(e.json_summary).summary})).map((function(e){var t=JSON.parse(e.json_summary);return Object(v.a)({},e,{json_summary:Object(v.a)({},t,{summary:JSON.parse(t.summary)})})})),console.log("parsed",a),u(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){i()}),[]);var d=function(){var e=Object(h.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},n=JSON.stringify({filename:t}),e.prev=2,e.next=5,y.a.put("/api/models/setDeployed",n,a);case 5:i(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"model-list-container"},l.a.createElement("div",{className:"filter-box"},l.a.createElement("input",{type:"text",placeholder:"Search by model name",onChange:function(e){return n(e.target.value)}})),s?s.filter((function(e){var t=e.filename;if(!a)return!0;var n,r=a.split(" "),l=Object(f.a)(r);try{for(l.s();!(n=l.n()).done;){var o=n.value;if(-1!==t.indexOf(o))return!0}}catch(c){l.e(c)}finally{l.f()}return!1})).map((function(e){var t=e.json_summary.history.history.val_loss;return l.a.createElement(w,{key:e.filename,modelName:e.filename,validationLossHistory:t,validationLoss:t[t.length-1],optimizerName:e.json_summary.optimizer.name,learningRate:e.json_summary.optimizer.learning_rate,activation:e.json_summary.summary.config.layers[1].config.activation,isDeployed:e.deployed,setDeployed:d})})):l.a.createElement("h3",null,"Loading models... "))},x=function(e){var t=e.onClick,a=e.enabled;return l.a.createElement("button",{onClick:t,disabled:!a},"Upload model")},k=(a(247),a(248),"NONE"),C="PENDING",N="DONE",U="ERROR",L=function(){var e=Object(r.useState)({fileIsH5:null}),t=Object(m.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(null),c=Object(m.a)(o,2),s=c[0],u=c[1],i=Object(r.useState)(k),d=Object(m.a)(i,2),p=d[0],f=d[1],b=function(){var e=Object(h.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files[0],u(a),f(k),console.log(a),a.name.indexOf(".h5")>-1){e.next=8;break}return n({fileIsH5:!1}),e.abrupt("return");case 8:n({fileIsH5:!0});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=null!=a.fileIsH5,g=!0===a.fileIsH5,O=function(){var e=Object(h.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(C),t.preventDefault(),(a=new FormData).append("tf_model",s),e.prev=4,e.next=7,y.a.post("/api/models/upload",a,{headers:{"Content-Type":"multipart/form-data"}});case 7:200===e.sent.status?f(N):f(U),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",null,l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement("a",{href:"http://localhost:5000/api/models/template",download:!0},"Download .py template")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h2",null,"Model Upload"),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("input",{type:"file",id:"modelFileUpload",onChange:b})),l.a.createElement("br",null),v?!0===a.fileIsH5?l.a.createElement("h3",null,"Model is ready to upload"):l.a.createElement("h3",{className:"red"},"File with he model must be .h5 format."):l.a.createElement("h3",null,"Please choose a .h5 file to upload."),l.a.createElement("br",null),l.a.createElement(x,{onClick:O,enabled:g}),l.a.createElement("br",null),p===C?l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",{className:"yellow"},"Model is being uploaded and converted to TF Lite..."," "),l.a.createElement("h5",null,"This may take up to 15 seconds")):null,p===N?l.a.createElement("h3",{className:"green"},"Model uploaded and converted to TF Lite successfully"):null,p===U?l.a.createElement("h3",{className:"red"},"An error has occured during the upload. Please try again"):null)},T=function(e){return new Promise((function(t){return setTimeout(t,e)}))},R=a(277),I=a(281),D=a(284),_=a(294),G=a(279),H=a(282),W=a(283),M=a(280),P=a(291).a,J=Object(R.a)({table:{minWidth:650}}),F={supportCode:"Support Code",wellBeingScore:"Wellbing Score",weeklySteps:"Weekly Steps",weeklyCalls:"Weekly Calls",errorRate:"Error Rate",postCode:"Post Code"},B=function(e){var t=e.data,a=J();return l.a.createElement(G.a,{component:M.a},l.a.createElement(I.a,{className:a.table,"aria-label":"simple table"},l.a.createElement(H.a,null,l.a.createElement(W.a,null,Object.keys(t[0]).map((function(e){return l.a.createElement(_.a,null,F[e])})))),l.a.createElement(D.a,null,t.map((function(e){return l.a.createElement(W.a,{key:e.id},Object.values(e).map((function(e){return l.a.createElement(_.a,{key:P(),component:"th",scope:"row"},e)})))})))))},z=function(){var e=Object(r.useState)(null),t=Object(m.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(null),c=Object(m.a)(o,2),s=c[0],u=c[1];return Object(r.useEffect)((function(){(function(){var e=Object(h.a)(E.a.mark((function e(){var t,a,r,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(500);case 2:return t={headers:{"Content-Type":"application/json"}},a=JSON.stringify({}),e.prev=4,e.next=7,y.a.get("/api/data/",a,t);case 7:r=e.sent,l=r.data,n(l.data.map((function(e){return JSON.parse(e)}))),u(l.numberOfEntries),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}})()()})),l.a.createElement("div",null,l.a.createElement("h1",null," The Aggregator "),s?l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Total entries: ",s),l.a.createElement("br",null),l.a.createElement("h3",null,"Latest ",Math.min(s,10)," entries:"),l.a.createElement(B,{data:a})):l.a.createElement("h3",null,"Loading data..."))},A=(a(249),a(289),a(285),a(288),a(250),a(292),a(109),a(110),a(287)),V=(Object(s.b)(null,{loginSuccess:function(e){return{type:"LOGIN_SUCCESS",payload:{token:e}}}})((function(e){var t=e.loginSuccess,a=e.setErrorMessage,o=e.setSuccessMessage,c=Object(r.useState)({username:"",password:""}),s=Object(m.a)(c,2),i=s[0],d=s[1],p=function(e){var t=e.target,a=t.name,r=t.value;d(Object(v.a)({},i,Object(n.a)({},a,r)))},f=function(){var e=Object(h.a)(E.a.mark((function e(){var n,r,l,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},r=JSON.stringify(i),e.prev=2,e.next=5,y.a.post("/api/auth/login",r,n);case 5:(l=e.sent).data.error?a(l.data.error):(c=l.data.token,t(c),o("Login successful.")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),a("An error has occured, please try again.");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"auth-form"},l.a.createElement("h1",{className:"margin-bottom"},"Log In"),l.a.createElement(A.a,{className:"margin-bottom",onSubmit:function(e){e.preventDefault(),f()}},l.a.createElement(A.a.Group,{name:"username"},l.a.createElement(A.a.Label,null,"Username"),l.a.createElement(A.a.Control,{placeholder:"Username",onChange:p,value:i.username,name:"username"})),l.a.createElement(A.a.Group,null,l.a.createElement(A.a.Label,null,"Password"),l.a.createElement(A.a.Control,{type:"password",placeholder:"Password",onChange:p,value:i.password,name:"password"})),l.a.createElement(j.a,{type:"submit"},"Submit")),l.a.createElement("div",null,"New User? ",l.a.createElement(u.b,{to:"/register"},"Click here to register!")),l.a.createElement("br",null))})),Object(s.b)(null,{registerSuccess:function(e){return{type:"REGISTER_SUCCESS",payload:{token:e}}}})((function(e){var t=e.registerSuccess,a=e.setErrorMessage,o=e.setSuccessMessage,c=Object(r.useState)({username:"",email:"",password:"",password2:""}),s=Object(m.a)(c,2),u=s[0],i=s[1],d=function(e){var t=e.target,a=t.name,r=t.value;i(Object(v.a)({},u,Object(n.a)({},a,r)))},p=function(){var e=Object(h.a)(E.a.mark((function e(){var n,r,l,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},r=JSON.stringify(u),e.prev=2,e.next=5,y.a.post("/api/auth/register",r,n);case 5:(l=e.sent).data.error?a(l.data.error):(c=l.data.token,t(c),o("Registration successful.")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),a("An error has occured, please try again.");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"auth-form"},l.a.createElement("h1",{className:"margin-bottom"},"Register"),l.a.createElement(A.a,{className:"margin-bottom",onSubmit:function(e){e.preventDefault(),u.password===u.password2?p():a("Passwords do not match")}},l.a.createElement(A.a.Group,{name:"username"},l.a.createElement(A.a.Label,null,"Username"),l.a.createElement(A.a.Control,{placeholder:"Username",onChange:d,value:u.username,name:"username"})),l.a.createElement(A.a.Group,null,l.a.createElement(A.a.Label,null,"Email address"),l.a.createElement(A.a.Control,{type:"email",placeholder:"Enter email",onChange:d,value:u.email,name:"email"})),l.a.createElement(A.a.Group,null,l.a.createElement(A.a.Label,null,"Password"),l.a.createElement(A.a.Control,{type:"password",placeholder:"Password",onChange:d,value:u.password,name:"password"})),l.a.createElement(A.a.Group,null,l.a.createElement(A.a.Label,null,"Repeat Password"),l.a.createElement(A.a.Control,{type:"password",placeholder:"Repeat Password",onChange:d,value:u.password2,name:"password2"})),l.a.createElement(j.a,{type:"submit"},"Submit")))})),a(286),a(290),Object(s.b)((function(e){return{loggedIn:!!e.auth.token}}),{logout:function(){return{type:"LOGOUT"}}})((function(e){e.loggedIn,e.logout;return l.a.createElement(u.a,null,l.a.createElement(p,null),l.a.createElement("div",{style:{padding:"20px"}},l.a.createElement(i.c,null,l.a.createElement(i.a,{path:"/modellist",component:S}),l.a.createElement(i.a,{path:"/modelupload",component:L}),l.a.createElement(i.a,{path:"/dataViewer",component:z}))))}))),q=a(18),K=a(121),Q=a(122),X=(a(252),a(255),a(123)),Y={token:localStorage.getItem("token")},Z=Object(q.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":var r=n.token;return localStorage.setItem("token",r),{token:r};case"LOGOUT":return localStorage.removeItem("token"),{token:null};default:return e}}}),$=[Q.a],ee=Object(q.createStore)(Z,{},Object(K.composeWithDevTools)(q.applyMiddleware.apply(void 0,$))),te={store:ee,persistor:Object(X.a)(ee)},ae=te.store;c.a.render(l.a.createElement(s.a,{store:ae},l.a.createElement(V,null)),document.getElementById("root"))},83:function(e,t,a){},93:function(e,t,a){}},[[127,1,2]]]);
//# sourceMappingURL=main.41c810d6.chunk.js.map